{"ast":null,"code":"var __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function () {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n\n        case 7:\n          op = _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n\n            _.ops.push(op);\n\n            break;\n          }\n\n          if (t[2]) _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n      }\n\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar __values = this && this.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n      m = s && o[s],\n      i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function () {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n\nimport TreeNode from \"../Base/TreeNode\";\n\nfunction Map(container, cmp) {\n  var _this = this;\n\n  if (container === void 0) {\n    container = [];\n  }\n\n  cmp = cmp || function (x, y) {\n    if (x < y) return -1;\n    if (x > y) return 1;\n    return 0;\n  };\n\n  var len = 0;\n  var root = new TreeNode();\n  root.color = TreeNode.TreeNodeColorType.black;\n\n  this.size = function () {\n    return len;\n  };\n\n  this.empty = function () {\n    return len === 0;\n  };\n\n  this.clear = function () {\n    len = 0;\n    root.key = root.value = undefined;\n    root.leftChild = root.rightChild = root.brother = undefined;\n  };\n\n  var findSubTreeMinNode = function (curNode) {\n    if (!curNode || curNode.key === undefined) throw new Error(\"unknown error\");\n    return curNode.leftChild ? findSubTreeMinNode(curNode.leftChild) : curNode;\n  };\n\n  var findSubTreeMaxNode = function (curNode) {\n    if (!curNode || curNode.key === undefined) throw new Error(\"unknown error\");\n    return curNode.rightChild ? findSubTreeMaxNode(curNode.rightChild) : curNode;\n  };\n\n  this.front = function () {\n    if (this.empty()) return undefined;\n    var minNode = findSubTreeMinNode(root);\n    if (minNode.key === undefined || minNode.value === undefined) throw new Error(\"unknown error\");\n    return {\n      key: minNode.key,\n      value: minNode.value\n    };\n  };\n\n  this.back = function () {\n    if (this.empty()) return undefined;\n    var maxNode = findSubTreeMaxNode(root);\n    if (maxNode.key === undefined || maxNode.value === undefined) throw new Error(\"unknown error\");\n    return {\n      key: maxNode.key,\n      value: maxNode.value\n    };\n  };\n\n  this.forEach = function (callback) {\n    var e_1, _a;\n\n    var index = 0;\n\n    try {\n      for (var _b = __values(this), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var pair = _c.value;\n        callback(pair, index++);\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n  };\n\n  this.getElementByPos = function (pos) {\n    var e_2, _a;\n\n    if (pos < 0 || pos >= this.size()) throw new Error(\"pos must more than 0 and less than set's size\");\n    var index = 0;\n\n    try {\n      for (var _b = __values(this), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var pair = _c.value;\n        if (index === pos) return pair;\n        ++index;\n      }\n    } catch (e_2_1) {\n      e_2 = {\n        error: e_2_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_2) throw e_2.error;\n      }\n    }\n\n    throw new Error(\"unknown Error\");\n  };\n\n  var _lowerBound = function (curNode, key) {\n    if (!curNode || curNode.key === undefined || curNode.value === undefined) return undefined;\n    var cmpResult = cmp(curNode.key, key);\n    if (cmpResult === 0) return {\n      key: curNode.key,\n      value: curNode.value\n    };\n    if (cmpResult < 0) return _lowerBound(curNode.rightChild, key);\n    return _lowerBound(curNode.leftChild, key) || {\n      key: curNode.key,\n      value: curNode.value\n    };\n  };\n\n  this.lowerBound = function (key) {\n    return _lowerBound(root, key);\n  };\n\n  var _upperBound = function (curNode, key) {\n    if (!curNode || curNode.key === undefined || curNode.value === undefined) return undefined;\n    var cmpResult = cmp(curNode.key, key);\n    if (cmpResult <= 0) return _upperBound(curNode.rightChild, key);\n    return _upperBound(curNode.leftChild, key) || {\n      key: curNode.key,\n      value: curNode.value\n    };\n  };\n\n  this.upperBound = function (key) {\n    return _upperBound(root, key);\n  };\n\n  var _reverseLowerBound = function (curNode, key) {\n    if (!curNode || curNode.key === undefined || curNode.value === undefined) return undefined;\n    var cmpResult = cmp(curNode.key, key);\n    if (cmpResult === 0) return {\n      key: curNode.key,\n      value: curNode.value\n    };\n    if (cmpResult > 0) return _reverseLowerBound(curNode.leftChild, key);\n    return _reverseLowerBound(curNode.rightChild, key) || {\n      key: curNode.key,\n      value: curNode.value\n    };\n  };\n\n  this.reverseLowerBound = function (key) {\n    return _reverseLowerBound(root, key);\n  };\n\n  var _reverseUpperBound = function (curNode, key) {\n    if (!curNode || curNode.key === undefined || curNode.value === undefined) return undefined;\n    var cmpResult = cmp(curNode.key, key);\n    if (cmpResult >= 0) return _reverseUpperBound(curNode.leftChild, key);\n    return _reverseUpperBound(curNode.rightChild, key) || {\n      key: curNode.key,\n      value: curNode.value\n    };\n  };\n\n  this.reverseUpperBound = function (key) {\n    return _reverseUpperBound(root, key);\n  };\n\n  var eraseNodeSelfBalance = function (curNode) {\n    var parentNode = curNode.parent;\n\n    if (!parentNode) {\n      if (curNode === root) return;\n      throw new Error(\"unknown error\");\n    }\n\n    if (curNode.color === TreeNode.TreeNodeColorType.red) {\n      curNode.color = TreeNode.TreeNodeColorType.black;\n      return;\n    }\n\n    var brotherNode = curNode.brother;\n    if (!brotherNode) throw new Error(\"unknown error\");\n\n    if (curNode === parentNode.leftChild) {\n      if (brotherNode.color === TreeNode.TreeNodeColorType.red) {\n        brotherNode.color = TreeNode.TreeNodeColorType.black;\n        parentNode.color = TreeNode.TreeNodeColorType.red;\n        var newRoot = parentNode.rotateLeft();\n        if (root === parentNode) root = newRoot;\n        eraseNodeSelfBalance(curNode);\n      } else if (brotherNode.color === TreeNode.TreeNodeColorType.black) {\n        if (brotherNode.rightChild && brotherNode.rightChild.color === TreeNode.TreeNodeColorType.red) {\n          brotherNode.color = parentNode.color;\n          parentNode.color = TreeNode.TreeNodeColorType.black;\n          if (brotherNode.rightChild) brotherNode.rightChild.color = TreeNode.TreeNodeColorType.black;\n          var newRoot = parentNode.rotateLeft();\n          if (root === parentNode) root = newRoot;\n          curNode.color = TreeNode.TreeNodeColorType.black;\n        } else if ((!brotherNode.rightChild || brotherNode.rightChild.color === TreeNode.TreeNodeColorType.black) && brotherNode.leftChild && brotherNode.leftChild.color === TreeNode.TreeNodeColorType.red) {\n          brotherNode.color = TreeNode.TreeNodeColorType.red;\n          if (brotherNode.leftChild) brotherNode.leftChild.color = TreeNode.TreeNodeColorType.black;\n          var newRoot = brotherNode.rotateRight();\n          if (root === brotherNode) root = newRoot;\n          eraseNodeSelfBalance(curNode);\n        } else if ((!brotherNode.leftChild || brotherNode.leftChild.color === TreeNode.TreeNodeColorType.black) && (!brotherNode.rightChild || brotherNode.rightChild.color === TreeNode.TreeNodeColorType.black)) {\n          brotherNode.color = TreeNode.TreeNodeColorType.red;\n          eraseNodeSelfBalance(parentNode);\n        }\n      }\n    } else if (curNode === parentNode.rightChild) {\n      if (brotherNode.color === TreeNode.TreeNodeColorType.red) {\n        brotherNode.color = TreeNode.TreeNodeColorType.black;\n        parentNode.color = TreeNode.TreeNodeColorType.red;\n        var newRoot = parentNode.rotateRight();\n        if (root === parentNode) root = newRoot;\n        eraseNodeSelfBalance(curNode);\n      } else if (brotherNode.color === TreeNode.TreeNodeColorType.black) {\n        if (brotherNode.leftChild && brotherNode.leftChild.color === TreeNode.TreeNodeColorType.red) {\n          brotherNode.color = parentNode.color;\n          parentNode.color = TreeNode.TreeNodeColorType.black;\n          if (brotherNode.leftChild) brotherNode.leftChild.color = TreeNode.TreeNodeColorType.black;\n          var newRoot = parentNode.rotateRight();\n          if (root === parentNode) root = newRoot;\n          curNode.color = TreeNode.TreeNodeColorType.black;\n        } else if ((!brotherNode.leftChild || brotherNode.leftChild.color === TreeNode.TreeNodeColorType.black) && brotherNode.rightChild && brotherNode.rightChild.color === TreeNode.TreeNodeColorType.red) {\n          brotherNode.color = TreeNode.TreeNodeColorType.red;\n          if (brotherNode.rightChild) brotherNode.rightChild.color = TreeNode.TreeNodeColorType.black;\n          var newRoot = brotherNode.rotateLeft();\n          if (root === brotherNode) root = newRoot;\n          eraseNodeSelfBalance(curNode);\n        } else if ((!brotherNode.leftChild || brotherNode.leftChild.color === TreeNode.TreeNodeColorType.black) && (!brotherNode.rightChild || brotherNode.rightChild.color === TreeNode.TreeNodeColorType.black)) {\n          brotherNode.color = TreeNode.TreeNodeColorType.red;\n          eraseNodeSelfBalance(parentNode);\n        }\n      }\n    }\n  };\n\n  var eraseNode = function (curNode) {\n    var swapNode = curNode;\n\n    while (swapNode.leftChild || swapNode.rightChild) {\n      if (swapNode.rightChild) {\n        swapNode = findSubTreeMinNode(swapNode.rightChild);\n        var tmpKey = curNode.key;\n        curNode.key = swapNode.key;\n        swapNode.key = tmpKey;\n        var tmpValue = curNode.value;\n        curNode.value = swapNode.value;\n        swapNode.value = tmpValue;\n        curNode = swapNode;\n      }\n\n      if (swapNode.leftChild) {\n        swapNode = findSubTreeMaxNode(swapNode.leftChild);\n        var tmpKey = curNode.key;\n        curNode.key = swapNode.key;\n        swapNode.key = tmpKey;\n        var tmpValue = curNode.value;\n        curNode.value = swapNode.value;\n        swapNode.value = tmpValue;\n        curNode = swapNode;\n      }\n    }\n\n    eraseNodeSelfBalance(swapNode);\n    if (swapNode) swapNode.remove();\n    --len;\n    root.color = TreeNode.TreeNodeColorType.black;\n  };\n\n  var inOrderTraversal = function (curNode, callback) {\n    if (!curNode || curNode.key === undefined) return false;\n    var ifReturn = inOrderTraversal(curNode.leftChild, callback);\n    if (ifReturn) return true;\n    if (callback(curNode)) return true;\n    return inOrderTraversal(curNode.rightChild, callback);\n  };\n\n  this.eraseElementByPos = function (pos) {\n    if (pos < 0 || pos >= len) throw new Error(\"pos must more than 0 and less than set's size\");\n    var index = 0;\n    inOrderTraversal(root, function (curNode) {\n      if (pos === index) {\n        eraseNode(curNode);\n        return true;\n      }\n\n      ++index;\n      return false;\n    });\n  };\n\n  this.eraseElementByKey = function (key) {\n    if (this.empty()) return;\n    var curNode = findElementPos(root, key);\n    if (curNode === undefined || curNode.key === undefined || cmp(curNode.key, key) !== 0) return;\n    eraseNode(curNode);\n  };\n\n  var findInsertPos = function (curNode, element) {\n    if (!curNode || curNode.key === undefined) throw new Error(\"unknown error\");\n    var cmpResult = cmp(element, curNode.key);\n\n    if (cmpResult < 0) {\n      if (!curNode.leftChild) {\n        curNode.leftChild = new TreeNode();\n        curNode.leftChild.parent = curNode;\n        curNode.leftChild.brother = curNode.rightChild;\n        if (curNode.rightChild) curNode.rightChild.brother = curNode.leftChild;\n        return curNode.leftChild;\n      }\n\n      return findInsertPos(curNode.leftChild, element);\n    } else if (cmpResult > 0) {\n      if (!curNode.rightChild) {\n        curNode.rightChild = new TreeNode();\n        curNode.rightChild.parent = curNode;\n        curNode.rightChild.brother = curNode.leftChild;\n        if (curNode.leftChild) curNode.leftChild.brother = curNode.rightChild;\n        return curNode.rightChild;\n      }\n\n      return findInsertPos(curNode.rightChild, element);\n    }\n\n    return curNode;\n  };\n\n  var insertNodeSelfBalance = function (curNode) {\n    var parentNode = curNode.parent;\n\n    if (!parentNode) {\n      if (curNode === root) return;\n      throw new Error(\"unknown error\");\n    }\n\n    if (parentNode.color === TreeNode.TreeNodeColorType.black) return;\n\n    if (parentNode.color === TreeNode.TreeNodeColorType.red) {\n      var uncleNode = parentNode.brother;\n      var grandParent = parentNode.parent;\n      if (!grandParent) throw new Error(\"unknown error\");\n\n      if (uncleNode && uncleNode.color === TreeNode.TreeNodeColorType.red) {\n        uncleNode.color = parentNode.color = TreeNode.TreeNodeColorType.black;\n        grandParent.color = TreeNode.TreeNodeColorType.red;\n        insertNodeSelfBalance(grandParent);\n      } else if (!uncleNode || uncleNode.color === TreeNode.TreeNodeColorType.black) {\n        if (parentNode === grandParent.leftChild) {\n          if (curNode === parentNode.leftChild) {\n            parentNode.color = TreeNode.TreeNodeColorType.black;\n            grandParent.color = TreeNode.TreeNodeColorType.red;\n            var newRoot = grandParent.rotateRight();\n            if (grandParent === root) root = newRoot;\n          } else if (curNode === parentNode.rightChild) {\n            var newRoot = parentNode.rotateLeft();\n            if (grandParent === root) root = newRoot;\n            insertNodeSelfBalance(parentNode);\n          }\n        } else if (parentNode === grandParent.rightChild) {\n          if (curNode === parentNode.leftChild) {\n            var newRoot = parentNode.rotateRight();\n            if (grandParent === root) root = newRoot;\n            insertNodeSelfBalance(parentNode);\n          } else if (curNode === parentNode.rightChild) {\n            parentNode.color = TreeNode.TreeNodeColorType.black;\n            grandParent.color = TreeNode.TreeNodeColorType.red;\n            var newRoot = grandParent.rotateLeft();\n            if (grandParent === root) root = newRoot;\n          }\n        }\n      }\n    }\n  };\n\n  this.setElement = function (key, value) {\n    if (key === null || key === undefined) {\n      throw new Error(\"to avoid some unnecessary errors, we don't suggest you insert null or undefined here\");\n    }\n\n    if (value === null || value === undefined) {\n      this.eraseElementByKey(key);\n      return;\n    }\n\n    if (this.empty()) {\n      ++len;\n      root.key = key;\n      root.value = value;\n      root.color = TreeNode.TreeNodeColorType.black;\n      return;\n    }\n\n    var curNode = findInsertPos(root, key);\n\n    if (curNode.key !== undefined && cmp(curNode.key, key) === 0) {\n      curNode.value = value;\n      return;\n    }\n\n    ++len;\n    curNode.key = key;\n    curNode.value = value;\n    insertNodeSelfBalance(curNode);\n    root.color = TreeNode.TreeNodeColorType.black;\n  };\n\n  var findElementPos = function (curNode, element) {\n    if (!curNode || curNode.key === undefined) return undefined;\n    var cmpResult = cmp(element, curNode.key);\n    if (cmpResult < 0) return findElementPos(curNode.leftChild, element);else if (cmpResult > 0) return findElementPos(curNode.rightChild, element);\n    return curNode;\n  };\n\n  this.find = function (element) {\n    return !!findElementPos(root, element);\n  };\n\n  this.getElementByKey = function (element) {\n    var curNode = findElementPos(root, element);\n    if ((curNode === null || curNode === void 0 ? void 0 : curNode.key) === undefined || (curNode === null || curNode === void 0 ? void 0 : curNode.value) === undefined) throw new Error(\"unknown error\");\n    return curNode.value;\n  }; // waiting for optimization, this is O(mlog(n+m)) algorithm now, but we expect it to be O(mlog(n/m+1)).\n  // (https://en.wikipedia.org/wiki/Red%E2%80%93black_tree#Set_operations_and_bulk_operations)\n\n\n  this.union = function (other) {\n    var _this = this;\n\n    other.forEach(function (_a) {\n      var key = _a.key,\n          value = _a.value;\n      return _this.setElement(key, value);\n    });\n  };\n\n  this.getHeight = function () {\n    if (this.empty()) return 0;\n\n    var traversal = function (curNode) {\n      if (!curNode) return 1;\n      return Math.max(traversal(curNode.leftChild), traversal(curNode.rightChild)) + 1;\n    };\n\n    return traversal(root);\n  };\n\n  var iterationFunc = function (curNode) {\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          if (!curNode || curNode.key === undefined || curNode.value === undefined) return [2\n          /*return*/\n          ];\n          return [5\n          /*yield**/\n          , __values(iterationFunc(curNode.leftChild))];\n\n        case 1:\n          _a.sent();\n\n          return [4\n          /*yield*/\n          , {\n            key: curNode.key,\n            value: curNode.value\n          }];\n\n        case 2:\n          _a.sent();\n\n          return [5\n          /*yield**/\n          , __values(iterationFunc(curNode.rightChild))];\n\n        case 3:\n          _a.sent();\n\n          return [2\n          /*return*/\n          ];\n      }\n    });\n  };\n\n  this[Symbol.iterator] = function () {\n    return iterationFunc(root);\n  };\n\n  container.forEach(function (_a) {\n    var key = _a.key,\n        value = _a.value;\n    return _this.setElement(key, value);\n  });\n  Object.freeze(this);\n}\n\nObject.freeze(Map);\nexport default Map;","map":{"version":3,"sources":["/home/labinf/exam-call-1-oxhunt/Client/node_modules/js-sdsl/dist/esm/Map/Map.js"],"names":["__generator","thisArg","body","_","label","sent","t","trys","ops","f","y","g","next","verb","Symbol","iterator","n","v","step","op","TypeError","call","done","value","pop","length","push","e","__values","o","s","m","i","TreeNode","Map","container","cmp","_this","x","len","root","color","TreeNodeColorType","black","size","empty","clear","key","undefined","leftChild","rightChild","brother","findSubTreeMinNode","curNode","Error","findSubTreeMaxNode","front","minNode","back","maxNode","forEach","callback","e_1","_a","index","_b","_c","pair","e_1_1","error","return","getElementByPos","pos","e_2","e_2_1","_lowerBound","cmpResult","lowerBound","_upperBound","upperBound","_reverseLowerBound","reverseLowerBound","_reverseUpperBound","reverseUpperBound","eraseNodeSelfBalance","parentNode","parent","red","brotherNode","newRoot","rotateLeft","rotateRight","eraseNode","swapNode","tmpKey","tmpValue","remove","inOrderTraversal","ifReturn","eraseElementByPos","eraseElementByKey","findElementPos","findInsertPos","element","insertNodeSelfBalance","uncleNode","grandParent","setElement","find","getElementByKey","union","other","getHeight","traversal","Math","max","iterationFunc","Object","freeze"],"mappings":"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","sourcesContent":["var __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nimport TreeNode from \"../Base/TreeNode\";\nfunction Map(container, cmp) {\n    var _this = this;\n    if (container === void 0) { container = []; }\n    cmp = cmp || (function (x, y) {\n        if (x < y)\n            return -1;\n        if (x > y)\n            return 1;\n        return 0;\n    });\n    var len = 0;\n    var root = new TreeNode();\n    root.color = TreeNode.TreeNodeColorType.black;\n    this.size = function () {\n        return len;\n    };\n    this.empty = function () {\n        return len === 0;\n    };\n    this.clear = function () {\n        len = 0;\n        root.key = root.value = undefined;\n        root.leftChild = root.rightChild = root.brother = undefined;\n    };\n    var findSubTreeMinNode = function (curNode) {\n        if (!curNode || curNode.key === undefined)\n            throw new Error(\"unknown error\");\n        return curNode.leftChild ? findSubTreeMinNode(curNode.leftChild) : curNode;\n    };\n    var findSubTreeMaxNode = function (curNode) {\n        if (!curNode || curNode.key === undefined)\n            throw new Error(\"unknown error\");\n        return curNode.rightChild ? findSubTreeMaxNode(curNode.rightChild) : curNode;\n    };\n    this.front = function () {\n        if (this.empty())\n            return undefined;\n        var minNode = findSubTreeMinNode(root);\n        if (minNode.key === undefined || minNode.value === undefined)\n            throw new Error(\"unknown error\");\n        return {\n            key: minNode.key,\n            value: minNode.value\n        };\n    };\n    this.back = function () {\n        if (this.empty())\n            return undefined;\n        var maxNode = findSubTreeMaxNode(root);\n        if (maxNode.key === undefined || maxNode.value === undefined)\n            throw new Error(\"unknown error\");\n        return {\n            key: maxNode.key,\n            value: maxNode.value\n        };\n    };\n    this.forEach = function (callback) {\n        var e_1, _a;\n        var index = 0;\n        try {\n            for (var _b = __values(this), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var pair = _c.value;\n                callback(pair, index++);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    };\n    this.getElementByPos = function (pos) {\n        var e_2, _a;\n        if (pos < 0 || pos >= this.size())\n            throw new Error(\"pos must more than 0 and less than set's size\");\n        var index = 0;\n        try {\n            for (var _b = __values(this), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var pair = _c.value;\n                if (index === pos)\n                    return pair;\n                ++index;\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n        throw new Error(\"unknown Error\");\n    };\n    var _lowerBound = function (curNode, key) {\n        if (!curNode || curNode.key === undefined || curNode.value === undefined)\n            return undefined;\n        var cmpResult = cmp(curNode.key, key);\n        if (cmpResult === 0)\n            return { key: curNode.key, value: curNode.value };\n        if (cmpResult < 0)\n            return _lowerBound(curNode.rightChild, key);\n        return _lowerBound(curNode.leftChild, key) || {\n            key: curNode.key,\n            value: curNode.value\n        };\n    };\n    this.lowerBound = function (key) {\n        return _lowerBound(root, key);\n    };\n    var _upperBound = function (curNode, key) {\n        if (!curNode || curNode.key === undefined || curNode.value === undefined)\n            return undefined;\n        var cmpResult = cmp(curNode.key, key);\n        if (cmpResult <= 0)\n            return _upperBound(curNode.rightChild, key);\n        return _upperBound(curNode.leftChild, key) || {\n            key: curNode.key,\n            value: curNode.value\n        };\n    };\n    this.upperBound = function (key) {\n        return _upperBound(root, key);\n    };\n    var _reverseLowerBound = function (curNode, key) {\n        if (!curNode || curNode.key === undefined || curNode.value === undefined)\n            return undefined;\n        var cmpResult = cmp(curNode.key, key);\n        if (cmpResult === 0)\n            return { key: curNode.key, value: curNode.value };\n        if (cmpResult > 0)\n            return _reverseLowerBound(curNode.leftChild, key);\n        return _reverseLowerBound(curNode.rightChild, key) || {\n            key: curNode.key,\n            value: curNode.value\n        };\n    };\n    this.reverseLowerBound = function (key) {\n        return _reverseLowerBound(root, key);\n    };\n    var _reverseUpperBound = function (curNode, key) {\n        if (!curNode || curNode.key === undefined || curNode.value === undefined)\n            return undefined;\n        var cmpResult = cmp(curNode.key, key);\n        if (cmpResult >= 0)\n            return _reverseUpperBound(curNode.leftChild, key);\n        return _reverseUpperBound(curNode.rightChild, key) || {\n            key: curNode.key,\n            value: curNode.value\n        };\n    };\n    this.reverseUpperBound = function (key) {\n        return _reverseUpperBound(root, key);\n    };\n    var eraseNodeSelfBalance = function (curNode) {\n        var parentNode = curNode.parent;\n        if (!parentNode) {\n            if (curNode === root)\n                return;\n            throw new Error(\"unknown error\");\n        }\n        if (curNode.color === TreeNode.TreeNodeColorType.red) {\n            curNode.color = TreeNode.TreeNodeColorType.black;\n            return;\n        }\n        var brotherNode = curNode.brother;\n        if (!brotherNode)\n            throw new Error(\"unknown error\");\n        if (curNode === parentNode.leftChild) {\n            if (brotherNode.color === TreeNode.TreeNodeColorType.red) {\n                brotherNode.color = TreeNode.TreeNodeColorType.black;\n                parentNode.color = TreeNode.TreeNodeColorType.red;\n                var newRoot = parentNode.rotateLeft();\n                if (root === parentNode)\n                    root = newRoot;\n                eraseNodeSelfBalance(curNode);\n            }\n            else if (brotherNode.color === TreeNode.TreeNodeColorType.black) {\n                if (brotherNode.rightChild && brotherNode.rightChild.color === TreeNode.TreeNodeColorType.red) {\n                    brotherNode.color = parentNode.color;\n                    parentNode.color = TreeNode.TreeNodeColorType.black;\n                    if (brotherNode.rightChild)\n                        brotherNode.rightChild.color = TreeNode.TreeNodeColorType.black;\n                    var newRoot = parentNode.rotateLeft();\n                    if (root === parentNode)\n                        root = newRoot;\n                    curNode.color = TreeNode.TreeNodeColorType.black;\n                }\n                else if ((!brotherNode.rightChild || brotherNode.rightChild.color === TreeNode.TreeNodeColorType.black) && brotherNode.leftChild && brotherNode.leftChild.color === TreeNode.TreeNodeColorType.red) {\n                    brotherNode.color = TreeNode.TreeNodeColorType.red;\n                    if (brotherNode.leftChild)\n                        brotherNode.leftChild.color = TreeNode.TreeNodeColorType.black;\n                    var newRoot = brotherNode.rotateRight();\n                    if (root === brotherNode)\n                        root = newRoot;\n                    eraseNodeSelfBalance(curNode);\n                }\n                else if ((!brotherNode.leftChild || brotherNode.leftChild.color === TreeNode.TreeNodeColorType.black) && (!brotherNode.rightChild || brotherNode.rightChild.color === TreeNode.TreeNodeColorType.black)) {\n                    brotherNode.color = TreeNode.TreeNodeColorType.red;\n                    eraseNodeSelfBalance(parentNode);\n                }\n            }\n        }\n        else if (curNode === parentNode.rightChild) {\n            if (brotherNode.color === TreeNode.TreeNodeColorType.red) {\n                brotherNode.color = TreeNode.TreeNodeColorType.black;\n                parentNode.color = TreeNode.TreeNodeColorType.red;\n                var newRoot = parentNode.rotateRight();\n                if (root === parentNode)\n                    root = newRoot;\n                eraseNodeSelfBalance(curNode);\n            }\n            else if (brotherNode.color === TreeNode.TreeNodeColorType.black) {\n                if (brotherNode.leftChild && brotherNode.leftChild.color === TreeNode.TreeNodeColorType.red) {\n                    brotherNode.color = parentNode.color;\n                    parentNode.color = TreeNode.TreeNodeColorType.black;\n                    if (brotherNode.leftChild)\n                        brotherNode.leftChild.color = TreeNode.TreeNodeColorType.black;\n                    var newRoot = parentNode.rotateRight();\n                    if (root === parentNode)\n                        root = newRoot;\n                    curNode.color = TreeNode.TreeNodeColorType.black;\n                }\n                else if ((!brotherNode.leftChild || brotherNode.leftChild.color === TreeNode.TreeNodeColorType.black) && brotherNode.rightChild && brotherNode.rightChild.color === TreeNode.TreeNodeColorType.red) {\n                    brotherNode.color = TreeNode.TreeNodeColorType.red;\n                    if (brotherNode.rightChild)\n                        brotherNode.rightChild.color = TreeNode.TreeNodeColorType.black;\n                    var newRoot = brotherNode.rotateLeft();\n                    if (root === brotherNode)\n                        root = newRoot;\n                    eraseNodeSelfBalance(curNode);\n                }\n                else if ((!brotherNode.leftChild || brotherNode.leftChild.color === TreeNode.TreeNodeColorType.black) && (!brotherNode.rightChild || brotherNode.rightChild.color === TreeNode.TreeNodeColorType.black)) {\n                    brotherNode.color = TreeNode.TreeNodeColorType.red;\n                    eraseNodeSelfBalance(parentNode);\n                }\n            }\n        }\n    };\n    var eraseNode = function (curNode) {\n        var swapNode = curNode;\n        while (swapNode.leftChild || swapNode.rightChild) {\n            if (swapNode.rightChild) {\n                swapNode = findSubTreeMinNode(swapNode.rightChild);\n                var tmpKey = curNode.key;\n                curNode.key = swapNode.key;\n                swapNode.key = tmpKey;\n                var tmpValue = curNode.value;\n                curNode.value = swapNode.value;\n                swapNode.value = tmpValue;\n                curNode = swapNode;\n            }\n            if (swapNode.leftChild) {\n                swapNode = findSubTreeMaxNode(swapNode.leftChild);\n                var tmpKey = curNode.key;\n                curNode.key = swapNode.key;\n                swapNode.key = tmpKey;\n                var tmpValue = curNode.value;\n                curNode.value = swapNode.value;\n                swapNode.value = tmpValue;\n                curNode = swapNode;\n            }\n        }\n        eraseNodeSelfBalance(swapNode);\n        if (swapNode)\n            swapNode.remove();\n        --len;\n        root.color = TreeNode.TreeNodeColorType.black;\n    };\n    var inOrderTraversal = function (curNode, callback) {\n        if (!curNode || curNode.key === undefined)\n            return false;\n        var ifReturn = inOrderTraversal(curNode.leftChild, callback);\n        if (ifReturn)\n            return true;\n        if (callback(curNode))\n            return true;\n        return inOrderTraversal(curNode.rightChild, callback);\n    };\n    this.eraseElementByPos = function (pos) {\n        if (pos < 0 || pos >= len)\n            throw new Error(\"pos must more than 0 and less than set's size\");\n        var index = 0;\n        inOrderTraversal(root, function (curNode) {\n            if (pos === index) {\n                eraseNode(curNode);\n                return true;\n            }\n            ++index;\n            return false;\n        });\n    };\n    this.eraseElementByKey = function (key) {\n        if (this.empty())\n            return;\n        var curNode = findElementPos(root, key);\n        if (curNode === undefined || curNode.key === undefined || cmp(curNode.key, key) !== 0)\n            return;\n        eraseNode(curNode);\n    };\n    var findInsertPos = function (curNode, element) {\n        if (!curNode || curNode.key === undefined)\n            throw new Error(\"unknown error\");\n        var cmpResult = cmp(element, curNode.key);\n        if (cmpResult < 0) {\n            if (!curNode.leftChild) {\n                curNode.leftChild = new TreeNode();\n                curNode.leftChild.parent = curNode;\n                curNode.leftChild.brother = curNode.rightChild;\n                if (curNode.rightChild)\n                    curNode.rightChild.brother = curNode.leftChild;\n                return curNode.leftChild;\n            }\n            return findInsertPos(curNode.leftChild, element);\n        }\n        else if (cmpResult > 0) {\n            if (!curNode.rightChild) {\n                curNode.rightChild = new TreeNode();\n                curNode.rightChild.parent = curNode;\n                curNode.rightChild.brother = curNode.leftChild;\n                if (curNode.leftChild)\n                    curNode.leftChild.brother = curNode.rightChild;\n                return curNode.rightChild;\n            }\n            return findInsertPos(curNode.rightChild, element);\n        }\n        return curNode;\n    };\n    var insertNodeSelfBalance = function (curNode) {\n        var parentNode = curNode.parent;\n        if (!parentNode) {\n            if (curNode === root)\n                return;\n            throw new Error(\"unknown error\");\n        }\n        if (parentNode.color === TreeNode.TreeNodeColorType.black)\n            return;\n        if (parentNode.color === TreeNode.TreeNodeColorType.red) {\n            var uncleNode = parentNode.brother;\n            var grandParent = parentNode.parent;\n            if (!grandParent)\n                throw new Error(\"unknown error\");\n            if (uncleNode && uncleNode.color === TreeNode.TreeNodeColorType.red) {\n                uncleNode.color = parentNode.color = TreeNode.TreeNodeColorType.black;\n                grandParent.color = TreeNode.TreeNodeColorType.red;\n                insertNodeSelfBalance(grandParent);\n            }\n            else if (!uncleNode || uncleNode.color === TreeNode.TreeNodeColorType.black) {\n                if (parentNode === grandParent.leftChild) {\n                    if (curNode === parentNode.leftChild) {\n                        parentNode.color = TreeNode.TreeNodeColorType.black;\n                        grandParent.color = TreeNode.TreeNodeColorType.red;\n                        var newRoot = grandParent.rotateRight();\n                        if (grandParent === root)\n                            root = newRoot;\n                    }\n                    else if (curNode === parentNode.rightChild) {\n                        var newRoot = parentNode.rotateLeft();\n                        if (grandParent === root)\n                            root = newRoot;\n                        insertNodeSelfBalance(parentNode);\n                    }\n                }\n                else if (parentNode === grandParent.rightChild) {\n                    if (curNode === parentNode.leftChild) {\n                        var newRoot = parentNode.rotateRight();\n                        if (grandParent === root)\n                            root = newRoot;\n                        insertNodeSelfBalance(parentNode);\n                    }\n                    else if (curNode === parentNode.rightChild) {\n                        parentNode.color = TreeNode.TreeNodeColorType.black;\n                        grandParent.color = TreeNode.TreeNodeColorType.red;\n                        var newRoot = grandParent.rotateLeft();\n                        if (grandParent === root)\n                            root = newRoot;\n                    }\n                }\n            }\n        }\n    };\n    this.setElement = function (key, value) {\n        if (key === null || key === undefined) {\n            throw new Error(\"to avoid some unnecessary errors, we don't suggest you insert null or undefined here\");\n        }\n        if (value === null || value === undefined) {\n            this.eraseElementByKey(key);\n            return;\n        }\n        if (this.empty()) {\n            ++len;\n            root.key = key;\n            root.value = value;\n            root.color = TreeNode.TreeNodeColorType.black;\n            return;\n        }\n        var curNode = findInsertPos(root, key);\n        if (curNode.key !== undefined && cmp(curNode.key, key) === 0) {\n            curNode.value = value;\n            return;\n        }\n        ++len;\n        curNode.key = key;\n        curNode.value = value;\n        insertNodeSelfBalance(curNode);\n        root.color = TreeNode.TreeNodeColorType.black;\n    };\n    var findElementPos = function (curNode, element) {\n        if (!curNode || curNode.key === undefined)\n            return undefined;\n        var cmpResult = cmp(element, curNode.key);\n        if (cmpResult < 0)\n            return findElementPos(curNode.leftChild, element);\n        else if (cmpResult > 0)\n            return findElementPos(curNode.rightChild, element);\n        return curNode;\n    };\n    this.find = function (element) {\n        return !!findElementPos(root, element);\n    };\n    this.getElementByKey = function (element) {\n        var curNode = findElementPos(root, element);\n        if ((curNode === null || curNode === void 0 ? void 0 : curNode.key) === undefined || (curNode === null || curNode === void 0 ? void 0 : curNode.value) === undefined)\n            throw new Error(\"unknown error\");\n        return curNode.value;\n    };\n    // waiting for optimization, this is O(mlog(n+m)) algorithm now, but we expect it to be O(mlog(n/m+1)).\n    // (https://en.wikipedia.org/wiki/Red%E2%80%93black_tree#Set_operations_and_bulk_operations)\n    this.union = function (other) {\n        var _this = this;\n        other.forEach(function (_a) {\n            var key = _a.key, value = _a.value;\n            return _this.setElement(key, value);\n        });\n    };\n    this.getHeight = function () {\n        if (this.empty())\n            return 0;\n        var traversal = function (curNode) {\n            if (!curNode)\n                return 1;\n            return Math.max(traversal(curNode.leftChild), traversal(curNode.rightChild)) + 1;\n        };\n        return traversal(root);\n    };\n    var iterationFunc = function (curNode) {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    if (!curNode || curNode.key === undefined || curNode.value === undefined)\n                        return [2 /*return*/];\n                    return [5 /*yield**/, __values(iterationFunc(curNode.leftChild))];\n                case 1:\n                    _a.sent();\n                    return [4 /*yield*/, { key: curNode.key, value: curNode.value }];\n                case 2:\n                    _a.sent();\n                    return [5 /*yield**/, __values(iterationFunc(curNode.rightChild))];\n                case 3:\n                    _a.sent();\n                    return [2 /*return*/];\n            }\n        });\n    };\n    this[Symbol.iterator] = function () {\n        return iterationFunc(root);\n    };\n    container.forEach(function (_a) {\n        var key = _a.key, value = _a.value;\n        return _this.setElement(key, value);\n    });\n    Object.freeze(this);\n}\nObject.freeze(Map);\nexport default Map;\n"]},"metadata":{},"sourceType":"module"}